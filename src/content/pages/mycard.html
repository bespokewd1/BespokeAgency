---
layout: ""
permalink: /mycard/
title: "Digital ID Card"
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ digital_card.name }} - Digital Card</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/assets/css/digital-card.css" />
  </head>
  <body class="digital-card-page">
    <!-- Toast Notification -->
    <div id="toast" class="toast" aria-live="polite">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
      <span id="toast-message">Contact saved!</span>
    </div>

    <!-- Dark Mode Toggle -->
    <button id="dark-mode-toggle" aria-label="Toggle Dark Mode">
      <svg
        class="cs-moon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 480 480"
        width="24"
        height="24"
      >
        <path
          d="M459.782 347.328c-4.288-5.28-11.488-7.232-17.824-4.96-17.76 6.368-37.024 9.632-57.312 9.632-97.056 0-176-78.976-176-176 0-58.4 28.832-112.768 77.12-145.472 5.472-3.712 8.096-10.4 6.624-16.832S285.638 2.4 279.078 1.44C271.59.352 264.134 0 256.646 0c-132.352 0-240 107.648-240 240s107.648 240 240 240c84 0 160.416-42.688 204.352-114.176 3.552-5.792 3.04-13.184-1.216-18.496z"
        />
      </svg>
      <svg
        class="cs-sun"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        width="24"
        height="24"
      >
        <g>
          <path
            d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"
          />
        </g>
      </svg>
    </button>

    <div class="id-card-wrapper">
      <main class="id-card">
        <!-- Header -->
        <header class="id-card-header">
          <img
            src="{{ digital_card.image }}"
            alt="{{ digital_card.name }}"
            class="id-profile-img"
          />
          <h1 class="id-name">{{ digital_card.name }}</h1>
          <p class="id-title">
            {{ digital_card.title }} - {{ digital_card.company }}
          </p>

          <button id="save-contact-btn" class="button-solid nav-button">
            <span class="link-text">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 5V19M5 12H19"
                  stroke="currentColor"
                  stroke-width="2.5"
                  stroke-linecap="round"
                />
              </svg>
              Save Contact
            </span>
          </button>
        </header>

        <!-- Tabs Navigation -->
        <div class="id-tabs-nav">
          <div class="id-tabs-container" data-active="about">
            <div class="id-tab-indicator"></div>
            <button
              class="id-tab-btn active"
              data-tab="about"
              aria-selected="true"
            >
              About
            </button>
            <button class="id-tab-btn" data-tab="contact" aria-selected="false">
              Contact
            </button>
          </div>
        </div>

        <!-- Body Content -->
        <div class="id-body">
          <!-- About Tab -->
          <div id="about" class="tab-content active">
            <p class="bio-text">
              {% if digital_card.bio %} {{ digital_card.bio }} {% else %}
              Welcome to my digital card. I specialize in web design and
              development. Check out the contact tab to connect with me! {%
              endif %}
            </p>
            <div class="info-divider"></div>
            <a
              class="info-item location-item"
              href="{{ digital_card.mapLink }}"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Location"
            >
              <span class="icon-box">
                <img
                  src="https://img.icons8.com/ios-filled/50/000000/marker.png"
                  alt="location"
                />
              </span>
              <span>{{ digital_card.address }}</span>
            </a>
          </div>

          <!-- Contact Tab -->
          <div id="contact" class="tab-content">
            <div class="info-grid">
              {% if digital_card.website %}
              <a
                href="{{ digital_card.website }}"
                target="_blank"
                class="info-item"
              >
                <span class="icon-box">
                  <img
                    src="https://img.icons8.com/ios-filled/50/000000/globe.png"
                    alt="website"
                  />
                </span>
                <span>Website</span>
              </a>
              {% endif %} {% if digital_card.email %}
              <a href="mailto:{{ digital_card.email }}" class="info-item">
                <span class="icon-box">
                  <img
                    src="https://img.icons8.com/ios-filled/50/000000/email.png"
                    alt="email"
                  />
                </span>
                <span>{{ digital_card.email }}</span>
              </a>
              {% endif %} {% if digital_card.phone %}
              <a href="tel:{{ digital_card.phone }}" class="info-item">
                <span class="icon-box">
                  <img
                    src="https://img.icons8.com/ios-filled/50/000000/phone.png"
                    alt="phone"
                  />
                </span>
                <span>{{ digital_card.phone }}</span>
              </a>
              {% endif %} {% for item in digital_card.socials %}
              <a href="{{ item.url }}" target="_blank" class="info-item">
                <span class="icon-box">
                  {% if item.icon == 'linkedin' %}
                  <img
                    src="https://img.icons8.com/ios-filled/50/000000/linkedin.png"
                    alt="linkedin"
                  />
                  {% elif item.icon == 'facebook' %}
                  <img
                    src="https://img.icons8.com/ios-filled/50/000000/facebook-new.png"
                    alt="facebook"
                  />
                  {% elif item.icon == 'instagram' %}
                  <img
                    src="https://img.icons8.com/ios-filled/50/000000/instagram-new.png"
                    alt="instagram"
                  />
                  {% else %}
                  <img
                    src="https://img.icons8.com/ios-filled/50/000000/link.png"
                    alt="link"
                  />
                  {% endif %}
                </span>
                <span>{{ item.platform }}</span>
              </a>
              {% endfor %}
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // ===== TOAST NOTIFICATION =====
      function showToast(message, duration = 3000) {
        const toast = document.getElementById("toast");
        const toastMessage = document.getElementById("toast-message");
        toastMessage.textContent = message;
        toast.classList.add("show");

        setTimeout(() => {
          toast.classList.remove("show");
        }, duration);
      }

      // ===== DEVICE DETECTION =====
      function isMobileDevice() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
          navigator.userAgent
        );
      }

      function isIOS() {
        return /iPad|iPhone|iPod/.test(navigator.userAgent);
      }

      function isAndroid() {
        return /Android/i.test(navigator.userAgent);
      }

      // ===== TAB SWITCHING =====
      const tabsContainer = document.querySelector(".id-tabs-container");
      const tabButtons = document.querySelectorAll(".id-tab-btn");
      const tabContents = document.querySelectorAll(".tab-content");
      let currentTab = "about";

      tabButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const targetTab = btn.dataset.tab;
          if (targetTab === currentTab) return;

          const direction = targetTab === "contact" ? "right" : "left";

          tabButtons.forEach((b) => {
            b.classList.remove("active");
            b.setAttribute("aria-selected", "false");
          });
          btn.classList.add("active");
          btn.setAttribute("aria-selected", "true");

          tabsContainer.dataset.active = targetTab;

          tabContents.forEach((content) => {
            content.classList.remove("active", "slide-left", "slide-right");
          });

          const targetContent = document.getElementById(targetTab);
          targetContent.classList.add(
            "active",
            direction === "right" ? "slide-right" : "slide-left"
          );

          currentTab = targetTab;
        });
      });

      // ===== DARK MODE =====
      const toggle = document.getElementById("dark-mode-toggle");
      const body = document.body;

      const savedTheme = localStorage.getItem("theme");
      const systemPrefersDark = window.matchMedia(
        "(prefers-color-scheme: dark)"
      ).matches;

      if (savedTheme === "dark" || (!savedTheme && systemPrefersDark)) {
        body.classList.add("dark-mode");
      }

      toggle.addEventListener("click", () => {
        body.classList.toggle("dark-mode");
        localStorage.setItem(
          "theme",
          body.classList.contains("dark-mode") ? "dark" : "light"
        );
      });

      // ===== VCARD SAVE =====
      function generateVCard(contact) {
        const vCardLines = [
          "BEGIN:VCARD",
          "VERSION:3.0",
          `FN:${contact.fullName}`,
          `N:${contact.lastName};${contact.firstName};;;`,
          `ORG:${contact.company}`,
          `TITLE:${contact.title}`,
          `TEL;TYPE=WORK,VOICE:${contact.phone}`,
          `EMAIL;TYPE=WORK,INTERNET:${contact.email}`,
          `URL;TYPE=WORK:${contact.website}`,
          `ADR;TYPE=WORK:;;${contact.address};;;;`,
        ];

        if (contact.note) {
          vCardLines.push(`NOTE:${contact.note}`);
        }

        vCardLines.push("END:VCARD");
        return vCardLines.join("\r\n");
      }

      async function handleSaveContact(contact) {
        try {
          const vCardData = generateVCard(contact);
          const fileName = `${contact.fullName
            .replace(/[^a-z0-9]/gi, "_")
            .toLowerCase()}.vcf`;
          const file = new File([vCardData], fileName, {
            type: "text/vcard;charset=utf-8",
          });

          // Method 1: Web Share API (Mobile Native Experience)
          if (
            navigator.canShare &&
            navigator.canShare({ files: [file] }) &&
            isMobileDevice()
          ) {
            try {
              await navigator.share({
                files: [file],
                title: `${contact.fullName} Contact`,
                text: "Save this contact",
              });
              showToast("Shared successfully!");
              return;
            } catch (err) {
              if (err.name !== "AbortError") {
                console.error("Share failed:", err);
                // Fallthrough to download method
              } else {
                return; // User cancelled share
              }
            }
          }

          // Method 2: Download Fallback (Desktop & Mobile Fallback)
          const blob = new Blob([vCardData], {
            type: "text/vcard;charset=utf-8",
          });
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = url;
          link.download = fileName;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          URL.revokeObjectURL(url);
          showToast("Contact downloaded!", 3000);
        } catch (error) {
          console.error("Error saving contact:", error);
          showToast("Could not save contact. Please try again.");
        }
      }

      document
        .getElementById("save-contact-btn")
        .addEventListener("click", function () {
          const contact = {
            firstName: "{{ digital_card.name }}".split(" ")[0],
            lastName: "{{ digital_card.name }}".split(" ").slice(1).join(" "),
            fullName: "{{ digital_card.name }}",
            phone: "{{ digital_card.phone }}",
            email: "{{ digital_card.email }}",
            title: "{{ digital_card.title }}",
            company: "{{ digital_card.company }}",
            website: "{{ digital_card.website }}",
            address: "{{ digital_card.address }}",
            note: "{{ digital_card.bio }}",
          };

          handleSaveContact(contact);
        });
    </script>
  </body>
</html>
